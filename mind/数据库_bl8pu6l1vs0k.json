{"root":{"data":{"id":"bl8pu6l1vs0k","created":1525503442165,"text":"数据库"},"children":[{"data":{"id":"bl8pudep0nsc","created":1525503457018,"text":"mongodb","note":"\n# mongo\n\n## windows下打开mongodb的大门\n安装\n1. 下载安装https://www.mongodb.com/download-center#community注意不要把32、64弄错就行，然后安装\n2. 创建数据库目录，最保险的具体做法：与安装目录相同，比如C盘，在C盘根目录创建data/db\n3. 找到mongodb安装目录（寻找方法，找到mongod.exe文件所在位置即可），该目录下执行：\n```\nmongod --dbpath c:\\data\\db\n```\n如果执行成功，会输出大量信息，形如\n```\n2015-09-25T15:54:09.212+0800 I CONTROL  Hotfix KB2731284 or later update is not\ninstalled, will zero-out data files\n2015-09-25T15:54:09.229+0800 I JOURNAL  [initandlisten] journal dir=c:\\data\\db\\j\nournal\n2015-09-25T15:54:09.237+0800 I JOURNAL  [initandlisten] recover : no journal fil\nes present, no recovery needed\n2015-09-25T15:54:09.290+0800 I JOURNAL  [durability] Durability thread started\n2015-09-25T15:54:09.294+0800 I CONTROL  [initandlisten] MongoDB starting : pid=2\n488 port=27017 dbpath=c:\\data\\db 64-bit host=WIN-1VONBJOCE88\n2015-09-25T15:54:09.296+0800 I CONTROL  [initandlisten] targetMinOS: Windows 7/W\nindows Server 2008 R2\n2015-09-25T15:54:09.298+0800 I CONTROL  [initandlisten] db version v3.0.6\n……\n```\n4. 将MongoDB服务器作为Windows服务运行 ,最简单的 ???可能有坑，自己测试执行完不报错就不管了\n```\nmongod.exe --logpath \"C:/data/log/mongodb.log\" --logappend --dbpath \"C:/data/db\" --serviceName \"MongoDB\" --install\n```\n5. MongoDB后台管理 Shell\n如果你需要进入MongoDB后台管理，你需要先打开mongodb装目录的下的bin目录，然后执行mongo.exe文件，MongoDB Shell是MongoDB自带的交互式Javascript shell,用来对MongoDB进行操作和管理的交互式环境。\n当你进入mongoDB后台后，它默认会链接到 test 文档（数据库）：\n```\n> db\ntest\n>\n```\n## 操作数据库\n1. 创建数据库\nMongoDB 创建数据库的语法格式如下：\nuse DATABASE_NAME\n如果数据库不存在，则创建数据库，否则切换到指定数据库。\n```\n> use runoob\nswitched to db runoob\n> db\nrunoob\n> \n```\n2. 概念： 数据库---集合（表）---记录\n3. 插入文档案例\n```\n>db.col.insert({title: 'MongoDB 教程', \n    description: 'MongoDB 是一个 Nosql 数据库',\n    by: '菜鸟教程',\n    url: 'http://www.runoob.com',\n    tags: ['mongodb', 'database', 'NoSQL'],\n    likes: 100\n})\n```\n\n## 连接\n1. 连接库\n```\nvar MongoClient = require('mongodb').MongoClient;\nvar DB_CONN_STR = 'mongodb://localhost:27017/runoob';\nMongoClient.connect(DB_CONN_STR, callback);\n```\n2. 连接表\ndb.collection(tableName)\n## 查询 根据id查询\n```JavaScript\nvar ObjectID = require(\"mongodb\").ObjectID;//必须,ObjectID()才能生效\n...\ndb.collection(tableName).find({\"_id\" :ObjectID('59bf76db85ee862ff847573b')}).toArray(function(err, result) {\n        if(err)\n        {\n          console.log('Error:'+ err);\n          return;\n        }     \n        console.log('xx',result);\n      });\n```\n  "},"children":[]}]},"template":"default","theme":"fresh-blue","version":"1.4.33"}